<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>CS460 A5 - WebGPU Bonus</title>
  <style>
    html, body { margin:0; padding:0; overflow:hidden; height:100%; background:#111; }
    canvas { width:100%; height:100%; display:block; }
  </style>
  <script src="https://cdn.babylonjs.com/babylon.js"></script>
  <script src="https://cdn.babylonjs.com/loaders/babylonjs.loaders.min.js"></script>
  <script src="https://cdn.babylonjs.com/materialsLibrary/babylonjs.materials.min.js"></script>
</head>
<body>
<canvas id="renderCanvas"></canvas>

<script type="module">
  const canvas = document.getElementById("renderCanvas");
  const engine = new BABYLON.WebGPUEngine(canvas, { antialiasing: true });
  await engine.initAsync();

  const scene = new BABYLON.Scene(engine);
  scene.clearColor = new BABYLON.Color4(0.05, 0.05, 0.1, 1);

  // Load your model (change filename if needed)
  const result = await BABYLON.SceneLoader.AppendAsync("", "labubu.glb", scene);

  
  result.meshes.forEach(mesh => {
    if (mesh.material) {
      // Option 1: Velvet 
      const velvet = new BABYLON.PBRMaterial("velvet", scene);
      velvet.albedoColor = mesh.material.albedoColor || new BABYLON.Color3(0.8, 0.3, 0.6);
      velvet.metallic = 0.0;
      velvet.roughness = 0.9;
      velvet.subSurface.isRefractionEnabled = true;
      velvet.subSurface.indexOfRefraction = 1.5;
      velvet.subSurface.tintColor = new BABYLON.Color3(1, 0.5, 0.7);
      mesh.material = velvet;

      // Option 2: Shiny Chrome (uncomment to use instead)
    //   const chrome = new BABYLON.PBRMaterial("chrome", scene);
    //   chrome.metallic = 1.0;
    //   chrome.roughness = 0.1;
    //   mesh.material = chrome;
    }
  });

  // Better lighting + environment
  scene.createDefaultCameraOrLight(true, true, true);
  scene.environmentIntensity = 1.5;
  scene.createDefaultEnvironment({
    createGround: false,
    createSkybox: false,
    environmentTexture: "https://playground.babylonjs.com/textures/environment.env"
  });

  scene.activeCamera.attachControl(canvas, true);

  engine.runRenderLoop(() => scene.render());
  window.addEventListener("resize", () => engine.resize());
</script>
</body>
</html>